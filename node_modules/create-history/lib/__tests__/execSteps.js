"use strict";

exports.__esModule = true;
var execSteps = function execSteps(steps, history, done) {
  var index = 0,
      unlisten = void 0;

  var cleanup = function cleanup() {
    unlisten();
    done.apply(undefined, arguments);
  };

  var execNextStep = function execNextStep() {
    try {
      steps[index++].apply(steps, arguments);

      if (index === steps.length) cleanup();
    } catch (error) {
      cleanup(error);
    }
  };

  if (steps.length) {
    unlisten = history.listen(execNextStep);
    execNextStep(history.getCurrentLocation());
  } else {
    done();
  }
};

exports.default = execSteps;